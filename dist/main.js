!function(t){var e={};function s(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=3)}([function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){"use strict";s.r(e);s(0),s(1),s(2);var a=class{constructor(){this.host=document.createElement("div"),this.host.classList.add("planets")}planetHtml(t){const{name:e,residentsData:s}=t;let a="";return null!=s&&(a='<div class="residents">'+s.map(t=>this.residentHtml(t)).join("")+"</div>"),`<div class="planet">\n              <div class="title">${e}</div>\n              ${a}\n            </div>`}residentHtml(t){const{name:e,gender:s,speciesData:a}=t;return`<div class="resident">\n              <div class="resident-name">${e}</div>\n              <div class="resident-gender">${s}</div>\n            </div>\n            ${this.speciesHtml(a)}`}speciesHtml(t){const e=t[0];if(null!=e){const{name:t,classification:s,language:a}=e;return`<div class="species">\n                <div class="species-name">name: <span>${t}</span></div>\n                <div class="species-classification">classification: <span>${s}</span></div>\n                <div class="species-language">language: <span>${a}</span></div>\n              </div>`}return""}render(t){console.log(t);let e='<div class="planets">'+t.map(t=>this.planetHtml(t)).join("")+"</div>";return this.host.innerHTML=e}};class n{constructor(t){this.name=t.name,this.residentsUrl=t.residents,this.residentsData=[]}}class i{constructor(t){this.name=t.name,this.gender=t.gender,this.speciesUrl=t.species,this.speciesData=[]}}class r{constructor(t){this.name=t.name,this.classification=t.classification,this.language=t.language}}const c=()=>(async t=>{try{const e=await fetch(t);if(!e.ok)throw new Error(e.statusText);return await e.json()}catch(t){return t}})("https://swapi.co/api/planets/");new class{constructor(t){this.state={data:null},this.host=t,this.planets=new a}async getApiData(){return await c()}createPlanets(t){return t.map(t=>new n(t))}createResident(t){return new i(t)}createSpecies(t){return new r(t)}async getSwapiData(t){try{const e=await fetch(t);if(!e.ok)throw new Error(e.statusText);return await e.json()}catch(t){return t}}async createResidentsData(t){return Promise.all(t.map(async(e,s)=>(e.residentsUrl.length&&await Promise.all(e.residentsUrl.map(async e=>{let a=await this.getSwapiData(e),n=this.createResident(a);t[s].residentsData.push(n)})),e)))}async createSpeciesData(t){return Promise.all(t.map(async(e,s)=>{let a=e.residentsData;return a.length&&await Promise.all(a.map(async(e,a)=>{if(e.speciesUrl.length){let n=await this.getSwapiData(e.speciesUrl),i=this.createSpecies(n);t[s].residentsData[a].speciesData.push(i)}})),e}))}async createAppData(){try{const t=await this.getApiData();console.log(t);const e=t.results;let s=this.createPlanets(e);const a=await this.createResidentsData(s);return await this.createSpeciesData(a)}catch(t){return t}}async render(){this.state.data=await this.createAppData(),this.host.innerHTML=this.planets.render(this.state.data)}}(document.getElementById("main")).render()}]);